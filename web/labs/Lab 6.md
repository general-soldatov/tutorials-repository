# LAB 6 "Язык программирования PHP"

## Цель работы
Освоить основные конструкции языка PHP. Уметь применять на практике условные и циклические конструкции. Научиться создавать и использовать функции в языке PHP. 

## Теоретическое введение
PHP является наиболее распространенным языком веб-программирования. Простота языка позволяет быстро и легко создавать сайты и порталы различной сложности. Отметим следующие преимущества PHP:
* версии пакетов разработки на PHP есть для всех распространенных операционных систем (Windows, MacOS, Linux);  
* PHP может работать в связке с различными веб-серверами: Apache, Nginx и др.;  
* простота и легкость программирования на PHP;  
* PHP поддерживает работу с множеством систем баз данных (MySQL, MSSQL, Oracle, Postgre, MongoDB и др.).
Программа или скрипт на PHP, как правило, находится в файле расширением .php. Хотя разработчики могут также вставлять код php и в файлы с расширениями .html/.htm.  
Когда пользователь обращается к скрипту в адресной строке браузера, набирая, например, http://localhost:8080/display.php, то веб-сервер передает его интерпретатору PHP. Затем интерпретатор обрабатывает код и генерирует на его основе html-разметку. И затем сгенерированный html-код отправляется пользователю.  
Документ PHP может содержать как разметку html, так и код на языке php. Для перехода от разметки html к коду php используются теги `<php` и `>`, между которыми идет код php. Данные теги служат указанием интерпретатору, что их содержимое надо интерпретировать как код php, а не разметку html.  
Также можно использовать краткую версию тегов: < и >. Для этого в файле php.ini надо изменить значение short_open_tag =
Off на short_open_tag = On  
Рассмотрим простейший скрипт на php:
```html
<html>
<head>
<title>Веб-сайт</title>
</head>
<body>
<?php
echo "<p>Привет мир!</p>";
echo "2 + 2 = " . (2+2);
?>
</body>
</html>
```
Здесь использованы две инструкции `echo "<p>Привет мир!</p>"` и `echo "2 + 2 = " . (2+2)`, который выводят определенное значение на страницу. Каждая отдельная инструкция в PHP завершается точкой с запятой.
При создании веб-сайта мы можем использовать комментарии. Например, мы можем прокомментировать какое-либо действие, чтобы впоследствии иметь представление, что этот код делает:
```php
<?php
echo "<p>Привет мир!</p>"; // вывод сообщения
// echo "2 + 2 = " . (2+2);
?>
```
Знак // предваряет однострочный комментарий, и все что идет после этого знака на одной строке, будет считаться комментарием и не будет выполняться интерпретатором. При обработке интерпретатор просто будет пропускать комментарии.  
Переменные хранят отдельные значения, которые можно использовать в выражениях на PHP. Для обозначения переменных используется знак доллара $. Например,
```php
<?php
$a = 10;
echo $a;
?>
```
Здесь определена переменная, которая будет хранить число 10. Присвоение значения происходит с помощью знака равенства =.
Можно присваивать значение другой переменной:
$a = 10;
$b=$a;
echo $b;
PHP является регистрозависимым языком, а значит, переменные $counter и $Counter будут представлять две разные переменные.
Также при наименовании переменных нам надо учитывать следующие правила:
* Имена переменных должны начинаться с алфавитного символа или с подчеркивания.
* Имена переменных могут содержать только символы: a–z, A–Z, 0–9, и знак подчеркивания.
* Имена переменных не должны включать в себя пробелы.
PHP является языком с динамической типизацией, т.е. тип данных переменной выводится во время выполнения, и в PHP нет необходимости указывать перед переменной тип данных.
PHP поддерживает восемь простых типов данных:
* integer (целые числа) целое число со знаком размером в 32 бита (от -2 147 483 648 до 2 147 483 647). Например:
```php
$int = -100;
echo $int;
```
* double (дробные числа) Double (числа с плавающей точкой) – размер числа с плавающей точкой зависит от платформы. Максимально возможное значение, как правило, составляет ~1.8e308 с точностью около 14 десятичных цифр. Например:
```php
$a1 = 1.5;
$a2 = 1.3e4; // 1.3 * 10^4
$a3 = 6E-8; // 0.00000006
echo $a1 . " | " . $a2 . " | " . $a3;
```
* boolean (логический тип) - могут принимать два значения: true и false. Чаще всего логические значения используются в условных конструкциях:
```php
$foo = true;
$a=10;
$b=5;
echo "foo = true <br>";
if($foo)
 echo $a+$b;
else
 echo $a-$b;
$foo = false;
echo "<br> foo = false <br>";
if($foo)
 echo $a+$b;
else
 echo $a-$b;
```
* string (строки) - бывают двух типов: в двойных кавычках и одинарных. От типа кавычек зависит обработка строк интерпретатором. Так, переменные в двойных кавычках заменяются значениями, а переменные в одинарных кавычках остаются неизменными.
```php
$a=10;
$b=5;
$result = "$a+$b <br>";
echo $result;
$result = '$a+$b';
echo $result;
```
В этом случае мы получим следующий вывод:
```bash
10+5
$a+$b
```
* array (массивы) - ассоциативный массив определяет набор элементов, каждый из которых представляет пару ключ=>значение. Создадим массив из 4 элементов:
```php
$phones = array('iPhone', 'Samsung Galaxy S III', 'Nokia N9',
'Samsung ACE II');
echo $phones[1];
```
Массив создается с помощью конструкции array(), в которой определяются элементы. Далее выводим второй элемент массива. Поскольку отсчет элементов в массиве начинается с нуля, то чтобы обратиться ко 2-му элементу, нам надо использовать выражение $phones[1]  
Так как в массиве только четыре элемента, мы не можем использовать в качестве ключа число, большее чем 3, например, $phones[4].
* resource (ресурсы) - представляет специальную переменную, которая содержит ссылку на внешний ресурс. В качестве внешнего ресурса могут использоваться, например, файлы или подключения к базам данных. Ресурсы создаются и используются специальными функциями.
* NULL - указывает, что значение переменной не определено. Использование данного значения полезно в тех случаях, когда мы хотим указать, что переменная не имеет значения. Например, если мы просто определим переменную без ее инициализации, и затем попробуем ее использовать, то нам интерпретатор выдаст диагностическое сообщение, что переменная не установлена. Использование значения NULL поможет избежать данной ситуации. Кроме того, мы сможем проверять наличие значения и в зависимости от результатов проверки производить те или иные действия:
```php
$a=NULL;
if($a)
 echo "Переменная a определена";
else
 echo "Переменная a не определена";
```
* object (объекты)
Константы, как и переменные, хранят определенное значение, только
в отличие от переменных, значение констант может быть установлено только
один раз, и далее мы уже не можем его изменить. Например, определим числовую константу:
<?php
define("NUMBER", 22);
echo NUMBER;
$num = NUMBER;
echo $num;
?>
Для определения константы используется оператор define, который имеет следующую форму: 
```php
define(string $name, string $value, bool $case_sen=false);
``` 
Параметр `$name` передает название константы, а параметр `$value`  - ее значение. 3-й необязательный параметр принимает логическое значение true или false. Если значение равно false, то при использовании константы будет учитываться ее регистр, если true - регистр не учитывается. В нашем случае 3-й параметр не использован, поэтому он по умолчанию равен false. После определения константы мы можем ее использовать так же, как и обычную переменную. Единственное исключение - мы не сможем изменить ее значение. Другое отличие от переменной - не надо использовать знак $. 

### Арифметические операции
`+` (операция сложения) $a + 5  
`-` (операция вычитания) $a - 5  
`*` (умножение) $a * 5  
`/` (деление) $a / 5  
`%` (получение остатка от деления) $a=12; echo $a % 5; // равно 2  
`++` (инкремент/ увеличение значения на единицу) ++$a; $a++;  
`--` (декремент/ уменьшение значения на единицу) --$a; $a--;  

### Операции присваивания

= Приравнивает переменной определенное значение: $a = 5  
+= Сложение с последующим присвоением результата. $a=12; $a += 5; echo $a; // равно 17  
-= Вычитание с последующим присвоением результата.  
*= Умножение с последующим присвоением результата.  
/= Деление с последующим присвоением результата.  
`.=` Объединение строк с присвоением результата. Применяется к 2 строкам. Если же переменные хранят не строки, а, к примеру, числа, то их значения преобразуются в строки и затем проводится операция: $a=12; $a .= 5; echo $a; // равно 125  
%= Получение остатка от деления с последующим присвоением результата: $a=12; $a %= 5; echo $a; // равно 2  
### Операции сравнения
`= =` Оператор равенства сравнивает 2 значения, и если они равны, возвращает true, иначе false: $a = = 5  
`= = =` Оператор тождественности также сравнивает два значения, и если они равны, возвращает true, иначе возвращает false: `$a === 5`  
`!=` Сравнивает два значения, и если они не равны, возвращает true, иначе возвращает false: $a != 5  
`!= =` Сравнивает два значения, и если они не равны, возвращает true, иначе возвращает false: $a !== 5   
`>` Сравнивает два значения, и если первое больше второго, то возвращает true, иначе возвращает false: $a > 5  
`<` Сравнивает два значения, и если первое меньше второго, то возвращает true, иначе возвращает false  
`>=` Сравнивает два значения, и если первое больше или равно второму, то возвращает true, иначе возвращает false  
`<=` Сравнивает два значения, и если первое меньше или равно второму, то возвращает true, иначе возвращает false  

### Логические операции
&& Возвращает true, если обе операции сравнения возвращают true, иначе возвращает false: $a == 5 && $b = 6   
and Аналогично операции && : $a == 5 and $b > 6  
|| Возвращает true, если хотя бы одна операция сравнения возвращает true, иначе возвращает false: $a == 5 || $b = 6  
or Аналогично операции ||: $a < 5 or $b > 6  
! Возвращает true, если операция сравнения возвращает false: !($a >= 5)  
xor Возвращает true, если только одно из значений равно true. Если оба равны true или ни одно из них не равно true, возвращает false. Например: 
```php
$a=12;
$b=6;
if($a xor $b)
 echo 'true';
else
 echo 'false';
```
### Объединение строк
Для объединения строк используется оператор "точка". Например, соединим несколько строк: 
```php
$a="Привет, ";
$b=" мир";
echo $a . $b . "!";
```
Если переменные представляют не строки, а другие типы, например, числа, то их значения преобразуются в строки, и затем также происходит операция объединения строк.

### Конструкция if..else
Конструкция if (условие) проверяет истинность некоторого условия,
и если оно окажется истинным, то выполняется блок выражений, стоящих после if. Если же условие ложно, то есть равно false, тогда блок if не выполняется.
Например:
```php
$a = 5;
$b = 2;
if($a<0) {
 echo $a * $b;
}
elseif($a==0) {
 echo $a + $b;
}
elseif($a==5) {
 echo $a - $b;
}
else {
 echo $a / $b;
}
echo "<br>конец выполнения программы";
```
### Цикл for
Цикл for имеет следующее формальное определение: 
for ([инициализация счетчика]; [условие]; [изменение счетчика])
{
 // действия
}
Рассмотрим стандартный цикл for:
```php
for ($i = 1; $i < 10; $i++) {
 echo "Квадрат числа $i равен " . $i * $i . "<br/>";
}
```
### Цикл while
Цикл while проверяет истинность некоторого условия, и если условие истинно, то выполняется блок выражений цикла:
```php
$counter = 1;
while($counter<10) {
 echo $counter * $counter . "<br />";
 $counter++;
}
```
### Операторы continue и break
Когда требуется выйти из цикла, не дожидаясь его завершения, мы можем воспользоваться оператором break. Для перехода к следующей итерации цикла применяется оператор continue.
```php
for ($i = 1; $i < 10; $i++) {
 $result = $i * $i;
 if($result>80) {
   break;
 }
 if($i==5)  {
   continue;
 }
 echo "Квадрат числа $i равен $result <br/>";
}
```
### Функции
Функции представляют собой набор инструкций, выполняющих определенное действие. Синтаксис определения функции:
```php
function имя_функции([параметр [, ...]])
{
 // Инструкции
}
```
Функция может возвращать некоторое значение - число, строку и т.д., то есть некоторый результат. Для возвращения значения в функции применяется оператор return, после которого указывается возвращаемое значение. Например:
```php
$a = get();
echo "Сумма квадратов от 1 до 9 равна $a";

function get() {
 $result = 0; // возвращаемое значение
 for($i = 1; $i<10; $i++)  {
   $result+= $i * $i;
 }
 return $result;
}
```
Функция с параметрами:
```php
$a = get(1, 10);
echo "Сумма квадратов от 1 до 9 равна $a";
function get($lowlimit, $highlimit) {
 $result = 0; // возвращаемое значение
 for($i = $lowlimit; $i < $highlimit; $i++)  {
   $result+= $i * $i;
 }
 return $result;
}
```

## Порядок выполнение
1. Напишем функцию для получения факториала:
```php
function getFactorial($n) {
 $result=1;
 for($i=1; $i <= $n; $i++)
 $result*=$i;
 return $result;
}
```
Выведите результат выполнения этой функции на экран.
2. Создадим массив и добавим в него элементы, а затем их выведем на экран. Если массив имеет числовой ключ, то перебор массива можно осуществить таким образом:
```php
$phones[0] = "Nokia N9";
$phones[1] = "Samsung Galaxy ACE II";
$phones[2] = "Sony Xperia Z3";
$phones[3] = "Samsung Galaxy III";
for($i=0;$i<count($phones);$i++)
 echo "$phones[$i] <br />"
```
Есть и другой способ создания массива с применением оператора array().
```php
$phones = array('iPhone', 'Samsung Galaxy S III', 'Nokia N9', 'Sony XPeria Z3');
echo $phones[1];
```
3. С ассоциативными массивами представленный выше способ не работает. И для них в PHP предназначен специальный тип цикла – foreach...as:
```php
$phones = array("apple"=>"iPhone5",
 "samsumg"=>"Samsung Galaxy III",
 "nokia" => "Nokia N9",
 "sony" => "Sony XPeria Z3");
foreach($phones as $item)
 echo "$item <br />";
```
В цикле foreach из массива последовательно извлекаются все элементы и их значение помещается в переменную, указанную после ключевого слова as. В данном случае в переменную $item по очереди помещаются все четыре значения из массива $phones. Когда будет извлечен последний элемент из массива, цикл завершается.
4. Попробуем извлечь ключи из массива:
```php
$phones = array("apple"=>"iPhone5",
 "samsumg"=>"Samsung Galaxy III",
 "nokia" => "Nokia N9",
 "sony" => "Sony XPeria Z3");
foreach($phones as $key=>$value)
 echo "$key => $value <br />";
```
5. Для сортировки по возрастанию используется функция asort:
```php
$tablets = array("lenovo" => "Lenovo IdeaTab A3500",
 "samsung" => "Samsung Galaxy Tab 4",
 "apple" => "Apple iPad Air");
asort($tablets, SORT_STRING);
echo "<ul>";
foreach ($tablets as $key => $value)
{
 echo "<li>$key : $value</li>";
}
echo "</ul>";
```
Тип сортировки может принимать три значения:
* SORT_REGULAR: автоматический выбор сортировки
* SORT_NUMERIC: числовая сортировка
* SORT_STRING: сортировка по алфавиту
6. Запустим свой сайт на PHP. Создайте текстовый файл, который назовем index.html. Откроем его в текстовом редакторе и добавим в него следующий код:
```html
<!DOCTYPE html>
<html>
<head>
<title>Первый сайт на PHP</title>
<meta charset="utf-8">
</head>
<body>
<h2>Введи свои данные:</h2>
<form action="display.php" method="POST">
<p>Введите имя: <input type="text" name="firstname" /></p>
<p>Введите фамилию: <input type="text" name="lastname"
/></p>
<input type="submit" value="Отправить">
</form>
</body>
</html>
```
Код html содержит форму с двумя текстовыми полями. При нажатии на кнопку данные этой формы отсылаются скрипту display.php, так как он указан в
атрибуте action.
В коде php мы получаем данные формы и выводим их на страницу.
Теперь создадим этот скрипт, который будет обрабатывать данные. Добавим в папку C:\localhost новый текстовый файл. Переименуем его в display.php. По умолчанию файлы программ на php имеют расширение .php. Итак, добавим в файл display.php следующий код:
```html
<!DOCTYPE html>
<html>
<head>
<title>Первый сайт на PHP</title>
<meta charset="utf-8">
</head>
<body>
<?php
$name = $_POST["firstname"];
$surname = $_POST["lastname"];
echo "Ваше имя: <b>".$name . " " . $surname . "</b>";
?>
</body>
</html>
```
Здесь уже в разметке html идут вкрапления кода PHP.
В данном случае у нас три выражения. Два из них получают переданные данные формы, например,` $name = $_POST["firstname"];`. `$name` – это переменная, которая будет хранить некоторое значение. Все переменные в PHP предваряются знаком $. И так как форма на странице index.html использует для отправки метод POST, то с помощью выражения `$_POST["firstname"]` мы можем получить значение, которое было введено в текстовое поле с атрибутом name="firstname". И это значение попадает в переменную $name.  
С помощью оператора echo можно вывести на страницу любое значение или текст, которые идут после оператора. В данном случае `(echo "Ваше имя: <b>".$name . " " . $surname . "</b>")` с помощью знака точки текст в кавычках соединяется со значениями переменных $name и $surname и выводится на страницу.

## Содержание отчёта
